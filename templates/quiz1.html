{% block content %}
{% load static %}
<div class="container">
    <h1>Welcome to CrptoLabs Quiz</h1>

    <div align="right" id="displaytimer"><b>Timer: 0 seconds</b></div>

    <form id="quizForm" method="post" action="{% url 'quiz1' %}">
        {% csrf_token %}
        {% for q  in questions %}
        <div class="form-group">
            <label for="question">{{ q.question }}</label>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="{{ q.id }}" id="gridRadios1" value="option1">
                <label class="form-check-label" for="gridRadios1">
                    {{ q.op1 }}
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="{{ q.id }}" id="gridRadios2" value="option2">
                <label class="form-check-label" for="gridRadios2">
                    {{ q.op2 }}
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="{{ q.id }}" id="gridRadios3" value="option3">
                <label class="form-check-label" for="gridRadios3">
                    {{ q.op3 }}
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="{{ q.id }}" id="gridRadios4" value="option4">
                <label class="form-check-label" for="gridRadios4">
                    {{ q.op4 }}
                </label>
            </div>
            <br>
        </div>
        {% endfor %}
        <input id='timer' type='hidden' name="timer" value="">
        <br>
        <button type="submit" class="btn btn-primary">Submit</button>
    </form>
    {% block script %}
    <script>
        const form = document.getElementById('quizForm');

        form.addEventListener('submit', function(event) {
            const radioGroups = form.querySelectorAll('.form-group');
            let unanswered = false;

            radioGroups.forEach(group => {
                const checkedInputs = group.querySelectorAll('input[type="radio"]:checked');
                if (checkedInputs.length === 0) {
                    unanswered = true;
                    return;
                }
            });

            if (unanswered) {
                event.preventDefault(); // Prevent form submission
                alert('Please answer all questions before submitting.');
            }
        });

        const timer = document.getElementById('displaytimer');
        const inputtag = document.getElementById('timer');
        let t = 0;
        setInterval(() => {
            t += 1;
            timer.innerHTML = "<b>Timer: " + t + " seconds</b>";
            inputtag.value = t;
        }, 1000);
    </script>
    {% endblock script %}
</div>
{% endblock %}
